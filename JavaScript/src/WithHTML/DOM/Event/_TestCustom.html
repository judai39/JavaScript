<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="box1" style="width: 100px;height: 100px;background: red;position: absolute"></div>
<div id="box2" style="width: 100px;height: 100px;background: green;position: absolute"></div>
  <script>
    let box1=document.getElementById('box1')
    let box2=document.getElementById('box2')
    drag(box1)
    drag(box2)
    //è‡ªå®šä¹‰äº‹ä»¶
    /**setCapture() releaseCapture() å³ä½¿é¼ æ ‡é—ªçš„å¤ªå¿«å¤±ç„¦ä¹Ÿä¸ä¼šç»ˆæ­¢,åªæœ‰releaseCapture()æ‰èƒ½å‰ªçŸ­
     * ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»ï¼šsetCapture()åƒæ˜¯æ‹´ç€ğŸçš„ç»³å­ï¼ŒreleaseCapture()å°±æ˜¯é—´æ–­è¯¥ç»³å­çš„å‰ªåˆ€ï¼Œé™¤é
     *              å‰ªæ–­è¯¥ç»³å­ï¼Œå¦åˆ™ğŸæ— æ³•æŒ£è„±
     *              ï¼šï¼šæ‰€ä»¥æœ¬ä¾‹ä¸­çš„releaseCapture()è®¾ç½®åœ¨onmouseupäº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬åªå¸Œæœ›åœ¨æ¾å¼€æŒ‰é’®æ—¶å¤±æ•ˆ
     * */
    function drag(obj){
        obj.onmousedown=function (event){
            // event=event||window.event
            obj.setCapture && obj.setCapture()
            let xDrift=event.clientX-obj.offsetLeft
            // let yDrift=event.clientY-obj.offsetHeight//å…ƒç´ é«˜åº¦
            let yDrift=event.clientY-obj.offsetTop//å…ƒç´ æ®ä¸Šè¾¹ç¼˜çš„é«˜åº¦
            /**documentä¸ºå¯¹è±¡ï¼Œå› ä¸ºåœ¨ç‚¹å‡»åç§»åŠ¨åœ¨é¡µé¢çš„ä»»æ„ä½ç½®éƒ½å¯è§¦å‘ï¼Œå› æ­¤documentå¯¹è±¡*/
            document.onmousemove=function (event){
                // event=event||wondow.event
                //è·å–é¼ æ ‡çš„ä½ç½®
                let left=event.clientX-xDrift
                let top=event.clientY-yDrift
                /**ä¸ºä»€ä¹ˆä¸å¯ä»¥ç”¨thisæ— å‚å‡½æ•°æï¼šå› ä¸ºthisæŒ‡çš„æ˜¯documentå•Š*/
                // let left=this.clientX-xDrift
                // let top=this.clientY-yDrift
                //ä¿®æ”¹objçš„ä½ç½®
                obj.style.left=left+'px'
                obj.style.top=top+'px'
            }
            document.onmouseup=function(){
                /**å¦‚æœä¸ç½®ç©ºï¼ŒæŒ‰ä¸‹å’Œç§»åŠ¨äº‹ä»¶ä¸ä¼šåœæ­¢ï¼ˆä½“ç°åœ¨æ–¹å—æ— æ³•è„±ç¦»é¼ æ ‡ï¼‰*/
                document.onmousemove=null
                document.onmouseup=null
                obj.releaseCapture && obj.releaseCapture()
            }
            /**return false æ˜¯ä¸ºäº†å–æ¶ˆæµè§ˆå™¨çš„é»˜è®¤è¡Œä¸º
             * åœ¨æ‹–æ‹½ç½‘é¡µå†…å®¹æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æœç´¢ç½‘é¡µå†…çš„å†…å®¹
             * */
            return false
        }
    }
  </script>
</body>
</html>